<html>
<head>
    <!-- 点击烟花特效 -->
    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
    <script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
    <script type="text/javascript" src="/js/fireworks.js"></script>

    <title>确是心安</title>
    <meta charset="utf-8">

    <!-- 引入配置文件 -->
    
<link rel="stylesheet" href="/css/main.css">


    <!-- 字体图片库 -->
    
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

    
<meta name="generator" content="Hexo 5.3.0"></head>
<body>

    <div id="main">
        <!-- 引入侧边栏 -->
        <aside>
            <!-- 搜索栏 -->
<div id="search">
    <input class="search-input" type="text" placeholder="search">
    <i id="search-icon" class="fa fa-bars" title="切换目录与索引">
</div>

<!-- 侧边目录栏 -->
<div id="tree">
    

    
                    <ul>
                        <li class="file">
                            <a href="/2021/01/28/hello-world/">
                                <i class="fa fa-file"></i>
                                hello-world
                            </a>
                        </li>
                    </ul>
    
                    <ul>
                        <li class="directory">
                            <a href="#" class="directory">
                                <i class="fa fa-folder"></i>
                                学习
                            </a>
                            
                    <ul>
                        <li class="file">
                            <a href="/2021/06/24/学习/Java爬虫项目/">
                                <i class="fa fa-file"></i>
                                Java爬虫项目
                            </a>
                        </li>
                    </ul>
    
                    <ul>
                        <li class="file">
                            <a href="/2021/02/07/学习/Mybetis的分页插件PageHelper/">
                                <i class="fa fa-file"></i>
                                Mybetis的分页插件PageHelper
                            </a>
                        </li>
                    </ul>
    
                    <ul>
                        <li class="file">
                            <a href="/2021/02/07/学习/SQL注入/">
                                <i class="fa fa-file"></i>
                                SQL注入
                            </a>
                        </li>
                    </ul>
    
                    <ul>
                        <li class="file">
                            <a href="/2021/06/24/学习/Schema与DTD的区别/">
                                <i class="fa fa-file"></i>
                                Schema与DTD的区别
                            </a>
                        </li>
                    </ul>
    
                    <ul>
                        <li class="file">
                            <a href="/2021/06/24/学习/new 与 newInstence创建对象的区别/">
                                <i class="fa fa-file"></i>
                                new 与 newInstence创建对象的区别
                            </a>
                        </li>
                    </ul>
    
                    <ul>
                        <li class="file">
                            <a href="/2021/03/20/学习/springboot所支持的缓存组件之——redis/">
                                <i class="fa fa-file"></i>
                                springboot所支持的缓存组件之——redis
                            </a>
                        </li>
                    </ul>
    
                    <ul>
                        <li class="file">
                            <a href="/2021/06/24/学习/xml的四种驱动模式/">
                                <i class="fa fa-file"></i>
                                xml的四种驱动模式
                            </a>
                        </li>
                    </ul>
    
                    <ul>
                        <li class="file">
                            <a href="/2021/06/24/学习/三大框架（DTD约束）/">
                                <i class="fa fa-file"></i>
                                三大框架（DTD约束）
                            </a>
                        </li>
                    </ul>
    
                    <ul>
                        <li class="file">
                            <a href="/2021/06/24/学习/事务初析/">
                                <i class="fa fa-file"></i>
                                事务初析
                            </a>
                        </li>
                    </ul>
    
                    <ul>
                        <li class="file active">
                            <a href="/2021/06/24/学习/关于前后台传值的学习/">
                                <i class="fa fa-file"></i>
                                关于前后台传值的学习
                            </a>
                        </li>
                    </ul>
    
                    <ul>
                        <li class="file">
                            <a href="/2021/06/24/学习/几种字符串变量的区别/">
                                <i class="fa fa-file"></i>
                                几种字符串变量的区别
                            </a>
                        </li>
                    </ul>
    
                    <ul>
                        <li class="file">
                            <a href="/2021/06/24/学习/有关XML的学习/">
                                <i class="fa fa-file"></i>
                                有关XML的学习
                            </a>
                        </li>
                    </ul>
    
                    <ul>
                        <li class="file">
                            <a href="/2021/06/24/学习/浅析servlet及war文件/">
                                <i class="fa fa-file"></i>
                                浅析servlet及war文件
                            </a>
                        </li>
                    </ul>
    
                        </li>
                        
                    </ul>
    
                    <ul>
                        <li class="directory">
                            <a href="#" class="directory">
                                <i class="fa fa-folder"></i>
                                生活
                            </a>
                            
                    <ul>
                        <li class="file">
                            <a href="/2021/06/24/生活/也许是在下一个午后/">
                                <i class="fa fa-file"></i>
                                也许是在下一个午后
                            </a>
                        </li>
                    </ul>
    
                    <ul>
                        <li class="file">
                            <a href="/2021/02/07/生活/测试的/">
                                <i class="fa fa-file"></i>
                                测试的
                            </a>
                        </li>
                    </ul>
    
                        </li>
                        
                    </ul>
    
</div>

<!-- 分级刷新 -->
<div id="toc"></div>
        </aside>

        <!-- 引入导航 -->
        <nav>
            <ul id="menu">
    <!-- 内部链接本页面直接跳转 -->
    
    <li class="menu-item">
        <a href="/" class="menu-item-link">主页</a>
    </li>
    
    <li class="menu-item">
        <a href="/about" class="menu-item-link">关于</a>
    </li>
    

    <!-- 外部链接打开新的窗口跳转 -->
    
    <li class="menu-item">
        <a href="https://yoususu.github.io" class="menu-item-link" target="_blank">github</a>
    </li>
    

</ul>
        </nav>

        <!-- 引入正文 -->
        <div id="content">
            <div>
    <span id="post-author">作者: 有苏</span>
    <span id="post-date">2021-06-24 13:42:47</span>
</div>

<div id="article">
    <p>1.jquery的Ajax传值</p>
<p>前台到后台</p>
<p>前台jsp代码：<br>function saveUserInfo(){<br>  var params = {};//定义一个数组</p>
<p>  var userNO = jq(“#userNO”).val();//把前台页面上的值都赋予一个变量<br>  var userName = jq(“#userName”).val();<br>  var phoneNumber = jq(“#phoneNumber”).val();<br>  params[“userNO”] = userNO ;//把这些变量都存在这个数组里<br>  params[“userName”] = userName;<br>  params[“phoneNumber”] = phoneNumber;<br>  jq.ajax({<br>        type : “post”,<br>        url : “&lt;%=basePath%&gt;personalSetting/personalSettingSaveAll.do”,//找到action里相应的方法<br>        data : params, //把数组的值赋给data，把上面的param改为data,这里就能直接去掉<br>        dataType : “text”,//根据数据类型选择text、jason等<br>        success : function(data) {<br>          alert(msg); //msg可以在后台Action配置，也可以在这里直接写提示信息<br>        },<br>        error : function(data) {<br>          alert(“msg”);<br>        }<br>       });<br>        }<br> }</p>
<p>后台Action代码：</p>
<p>@SuppressWarnings({ “unchecked”, “unused”, “rawtypes” })<br>@RequestMapping(value = “/personalSetting/personalSettingSaveAll.do”, method = RequestMethod.POST)<br>public void saveAll(ModelMap model, HttpServletRequest request, HttpServletResponse response) throws Exception {<br>    response.setCharacterEncoding(“UTF-8”);<br>    HttpSession session = request.getSession();<br>    String userNO  = request.getParameter(“userNO”)+””;<br>    String userName = request.getParameter(“userName”)+””;<br>    String phoneNumber = request.getParameter(“phoneNumber”)+””;<br>    PersonalSettingEntity pSE = new PersonalSettingEntity();<br>    if(!(“”.equals(userNO))||””.equals(userName )||””.equals(phoneNumber ))){ //如果都不为空<br>        pSE.setUserNO(userNO);<br>        pSE.setUserName(userName);<br>        pSE.setPhoneNumber(phoneNumber);<br>        PersonSettingService.saveProcessSetting(pSE);<br>        msg = “保存成功”;<br>    }else{<br>        msg = “填写不完整”; //可以在前台校验，这里为了举例子<br>    }<br>        response.getWriter().print(msg); //这里的msg是text数据，所以前台数据类型是text。<br>}</p>
<p>后台到前台</p>
<p>后台Action代码：</p>
<p>@SuppressWarnings({ “unchecked”, “unused”, “rawtypes” })<br>@RequestMapping(value = “/personalSetting/personalSettingInitAll.do”, method = RequestMethod.POST)<br>public void qureyAll(ModelMap model, HttpServletRequest request, HttpServletResponse response) throws Exception {<br>    response.setCharacterEncoding(“UTF-8”);<br>    HttpSession session = request.getSession();<br>    String userId = request.getSession().getAttribute(“currentUserId”).toString();<br>    PersonalSettingEntity pSE = PersonSettingService.getPersonalSetting(Long.valueOf(userId));<br>    response.getWriter().print(JSONArray.fromObject(pSE).toString());<br>}</p>
<p>前台jsp代码：</p>
<p>function get(){<br>  jq.ajax({<br>         type : “post”,<br>         url : “&lt;%=basePath%&gt;personalSetting/personalSettingInitAll.do”,<br>         dataType : “json”,<br>         success :function (data) {<br>          var bean;<br>          jq.each(data,function(index){<br>          bean = data[index];<br>          jq(“#userNO”).attr(“value”,bean.userNO);<br>          jq(“#userName”).attr(“value”,bean.userName);<br>          jq(“#phoneNumber”).attr(“value”,bean.phoneNumber);<br>           }<br>         },<br>         error :function (data){<br>            alert(“系统出错！”);<br>         }<br>   });<br> } </p>
<p>2.JSP给JS传值（后到前）</p>
<p>三种方法：<br>1：直接在代码中嵌入&lt;%=%&gt;表达式。（会导致很多后续问题，不建议）<br>2：通过JSP的EL表达式，即%{ }；<br>3：在jsp中调用js的dom（类似于XML的DOM树），以参数的方法给JS函数传值。</p>
<p>3.springboot+thymeleaf框架，前台接收后台传值</p>
<p>后台代码：通过ModelAndView类型返回</p>
<p>@RequestMapping(value = “/list”, method = RequestMethod.GET)<br>  public ModelAndView list(@RequestParam(value = “pageNum”, defaultValue = “1”) int pageNum,<br>                             @RequestParam(value = “pageSize”, defaultValue = “10”) int pageSize) {<br>        Page<User> page = PageHelper.startPage(pageNum, pageSize);<br>        List<User> userList = userService.findAll();<br>        page.addAll(userList);<br>        ModelAndView model = new ModelAndView(“demo_user”,”page”,page);<br>        model.addObject(“websocketUrl”, “ws://localhost:8080/websocket”);<br>        return model;<br>    }</User></User></p>
<p>前台Html：通过隐藏input元素传值</p>
<p><code>&lt;input id=&quot;websocketUrl&quot; type=&quot;hidden&quot; th:value=&quot;$&#123;websocketUrl&#125;&quot; /&gt;</code></p>
<p>前台JS：<br>$(“#websocketUrl”).val();</p>
<p>注意：前台需要${websocketUrl}形式读取后台传值时，注意使用thymeleaf的类型标签“th:xx”，使用html默认标签很多都不能读取${websocketUrl}。</p>
<p>4.struts2框架</p>
<p>struts2的Action类一般都会继承（extends）ActionSupport类（Action类，即实现action的类）</p>
<p>1.前传后：</p>
<p>jsp里<code>&lt;input type=&quot;text&quot; name=&quot;username&quot;/&gt;</code>，后台Action类里有变量private String username;及其get(),set()方法即可得到</p>
<p>此时，后传前：<br>Action类：</p>
<p>1）com.opensymphony.xwork2.ActionContext;<br>定义：ActionContext context=ActionContext.getContext();<br>context.put(“username”, username);<br>前台用：${username}即可得到其值；</p>
<p>2）javax.servlet.http.HttpServletRequest<br>HttpServletRequest request;<br>@Override<br>public void setServletRequest(HttpServletRequest request) {<br>this.request=request;<br>}<br>request.setAttribute(“message”, “通过ServletRequestAware接口实现了访问Servlet API”);<br>前台取值：${requestScope.message}</p>
<p>3）ServletActionContext.getRequest().setAttribute(“message”, “通过ServletActionContext接口实现了访问Servlet API”);<br>前台取值：${requestScope.message}</p>
<p>2.前台传值：</p>
<p><code>&lt;input type=&quot;text&quot; name=&quot;user.userName&quot;/&gt;</code><br>Action类：（User类与前台传的所有变量名相同）<br>private User user;<br>public User getUser() {<br>return user;<br>}<br>ActionContext context=ActionContext.getContext()；<br>context.getSession().put(“userName”, user.getUserName());</p>
<p>前台取值：<br>&lt;%=request.getAttribute(“user.userName”) %&gt;或${userName }</p>
<p>3.前台传值：</p>
<p><code>&lt;input type=&quot;text&quot; name=&quot;userName&quot;/&gt;</code><br>Action类：继承extends ActionSupport implements ModelDriven<User><br>User user=new User();<br>@Override<br>public User getModel() {<br>return user;<br>}</User></p>
<p>前台取值：<br>${userName }</p>

</div>
        </div>
        
    </div>

    <!-- 引入 jquery -->
    
<script src="/lib/jquery-3.4.1.min.js"></script>


    <!-- 引入 pjax -->
    
<script src="/lib/jquery.pjax.js"></script>

    
    <!-- 引入 js 文件 -->
    
<script src="/js/main.js"></script>


    <!-- 引入 鼠标点击16字箴言 -->
    
<script src="/js/click_show_text.js"></script>


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>